<?xml version="1.0" encoding="utf-8"?>
<flight_control name="FCS A-6E">
  <property value="30">fcs/rate-limits/elevator</property> <!-- guestimated value. ~1 sec travel -->
  <property value="0">fcs/surfaces/flap-pos-norm</property>
  <channel name="Pitch">

    <aerosurface_scale name="fcs/elevator/pitch-trim-limit-limit">
      <input>fcs/pitch-trim-cmd-norm</input>
      <range>
	<min>-1</min>
	<max>0.5</max>
      </range>
    </aerosurface_scale>

    <aerosurface_scale name="fcs/elevator/pitch-trim-limit-full">
      <input>fcs/pitch-trim-cmd-norm</input>
      <range>
	<min>-1</min>
	<max>0.916</max> <!-- 22 deg max out of 24 -->
      </range>
    </aerosurface_scale>

    <switch name="fcs/elevator/pitch-trim-full">
      <default value="fcs/elevator/pitch-trim-limit-limit"/>
      <test value="fcs/elevator/pitch-trim-limit-full">
	fcs/flap-cmd-norm != 0
      </test>
    </switch>

    <summer name="fcs/elevator/pitch-trim-sum">
      <input>fcs/elevator-cmd-norm</input>
      <input>fcs/pitch-trim-cmd-norm</input>
      <clipto>
	<min> -1 </min>
	<max>  1 </max>
      </clipto>
    </summer>

    <aerosurface_scale name="fcs/elevator/elevator-limited-deg">
      <input>fcs/elevator/pitch-trim-sum</input>
      <range>
        <min>  -9.5 </min>
	<max>   1.5 </max>
      </range>
      <zero_centered>false</zero_centered>
    </aerosurface_scale>

    <aerosurface_scale name="fcs/elevator/elevator-full-deg">
      <input>fcs/elevator/pitch-trim-sum</input>
      <range>
        <min> -24.0 </min>
	<max>   1.5 </max>
      </range>
      <zero_centered>false</zero_centered>
    </aerosurface_scale>

    <switch name="fcs/elevator/elevator-correct-deg">
      <default value="fcs/elevator/elevator-full-deg"/>
      <test value="fcs/elevator/elevator-limited-deg">
	fcs/surfaces/flap-pos-norm == 0
      </test>
    </switch>

    <actuator name="fcs/surfaces/elevator-pos-deg">
      <input>fcs/elevator/elevator-correct-deg</input>
      <rate_limit>fcs/rate-limits/elevator</rate_limit>
      <output>fcs/elevator-pos-deg</output>
    </actuator>

    <aerosurface_scale name="fcs/surfaces/elevator-pos-norm">
      <input>fcs/surfaces/elevator-pos-deg</input>
      <domain>
        <min> -24.0 </min>
	<max>   1.5 </max>
      </domain>
      <range>
        <min> -1 </min>
	<max>  1 </max>
      </range>
      <zero_centered>false</zero_centered>
      <output>fcs/elevator-pos-norm</output>
    </aerosurface_scale>

    <aerosurface_scale name="fcs/surfaces/elevator-pos-rad">
      <input>fcs/surfaces/elevator-pos-norm</input>
      <range>
	<min>-0.733038 </min>
	<max> 0.0261799</max>
      </range>
      <zero-centered>false</zero-centered>
    </aerosurface_scale>
    
  </channel>

  <property value="350">fcs/rate-limits/flaperon</property>
  <channel name="Roll">

    <aerosurface_scale name="fcs/flaperon/roll-trim-limited">
      <input>fcs/roll-trim-cmd-norm</input>
      <range>
	<min>-0.1764</min> <!-- 9/51 -->
	<max>0.1764</max>
      </range>
    </aerosurface_scale>

    <summer name="fcs/flaperon/roll-trim-sum">
      <input>fcs/aileron-cmd-norm</input>
      <input>fcs/flaperon/roll-trim-limited</input>
      <clipto>
        <min> -1 </min>
        <max>  1 </max>
      </clipto>
    </summer>

    <pure_gain name="fcs/flaperon/left-flaperon-cmd-deg">
      <input>fcs/flaperon/roll-trim-sum</input>
      <gain>51</gain>
      <clipto>
	<min> -51 </min>
	<max>  0  </max>
      </clipto>
    </pure_gain>

    <switch name="fcs/flaperon/left-flaperon-sum-deg">
      <default value="fcs/flaperon/left-flaperon-cmd-deg"/>
      <test value="-39" logic="AND">
	fcs/flaperon/gnd-spoiler-arm == 1
	gear/unit[1]/WOW == 1
	fcs/throttle-cmd-norm == 0
	fcs/throttle-cmd-norm[1] == 0
      </test>
      <test value="0">
	fcs/flaperon/roll-trim-sum gt 0
      </test>
    </switch>

    <actuator name="fcs/surfaces/left-flaperon-pos-deg">
      <input>fcs/flaperon/left-flaperon-sum-deg</input>
      <rate_limit>fcs/rate-limits/flaperon</rate_limit>
      <output>fcs/left-aileron-pos-deg</output>
    </actuator>

    <aerosurface_scale name="fcs/surfaces/left-flaperon-pos-norm">
      <input>fcs/surfaces/left-flaperon-pos-deg</input>
      <domain>
	<min>-51</min>
	<max>0</max>
      </domain>
      <range>
	<min>-1</min>
	<max>0</max>
      </range>
      <output>fcs/left-aileron-pos-norm</output>
    </aerosurface_scale>

    <aerosurface_scale name="fcs/surfaces/left-flaperon-pos-rad">
      <input>fcs/surfaces/left-flaperon-pos-norm</input>
      <range>
	<min>-0.890118</min>
	<max>0</max>
      </range>
      <output>fcs/left-aileron-pos-rad</output>
    </aerosurface_scale>

    <pure_gain name="fcs/flaperon/right-flaperon-cmd-deg">
      <input>fcs/flaperon/roll-trim-sum</input>
      <gain>-51</gain>
      <clipto>
	<min> -51 </min>
	<max>  0  </max>
      </clipto>
    </pure_gain>

    <switch name="fcs/flaperon/right-flaperon-sum-deg">
      <default value="fcs/flaperon/right-flaperon-cmd-deg"/>
      <test value="-39" logic="AND">
	fcs/flaperon/gnd-spoiler-arm == 1
	gear/unit[1]/WOW == 1
	fcs/throttle-cmd-norm == 0
	fcs/throttle-cmd-norm[1] == 0
      </test>
      <test value="0">
	fcs/flaperon/roll-trim-sum lt 0
      </test>
    </switch>

    <actuator name="fcs/surfaces/right-flaperon-pos-deg">
      <input>fcs/flaperon/right-flaperon-sum-deg</input>
      <rate_limit>fcs/rate-limits/flaperon</rate_limit>
      <output>fcs/surfaces/right-flaperon-pos-deg</output>
      <output>fcs/right-aileron-pos-deg</output>
    </actuator>

    <aerosurface_scale name="fcs/surfaces/right-flaperon-pos-norm">
      <input>fcs/surfaces/right-flaperon-pos-deg</input>
      <domain>
	<min>-51</min>
	<max>0</max>
      </domain>
      <range>
	<min>-1</min>
	<max>0</max>
      </range>
      <output>fcs/right-aileron-pos-norm</output>
    </aerosurface_scale>

    <aerosurface_scale name="fcs/surfaces/right-flaperon-pos-rad">
      <input>fcs/surfaces/right-flaperon-pos-norm</input>
      <range>
	<min>-0.890118</min>
	<max>0</max>
      </range>
      <output>fcs/right-aileron-pos-rad</output>
    </aerosurface_scale>

  </channel>

  <!--  <property value="1">fcs/yaw-damper-enable</property> -->
  <property value="60">fcs/rate-limits/rudder</property>
  <channel name="Yaw">

    <aerosurface_scale name="fcs/rudder/rudder-trim-limited">
      <input>fcs/yaw-trim-cmd-norm</input>
      <range>
	<min>-0.0784</min>
	<max>0.0784</max>
      </range>
    </aerosurface_scale>

    <aerosurface_scale name="fcs/rudder/rudder-trim-full">
      <input>fcs/yaw-trim-cmd-norm</input>
      <range>
	<min>-0.2</min>
	<max>0.2</max>
      </range>
    </aerosurface_scale>

    <switch name="fcs/rudder/rudder-trim-norm">
      <default value="fcs/rudder/rudder-trim-limited"/>
      <test value="fcs/rudder/rudder-trim-full">
	fcs/flap-pos-norm != 0
      </test>
    </switch>
    
    <summer name="fcs/rudder/rudder-cmd-sum">
      <input>fcs/rudder-cmd-norm</input>
      <input>fcs/yaw-trim-cmd-norm</input>
      <clipto>
        <min> -1 </min>
        <max>  1 </max>
      </clipto>
    </summer>
<!--
    <scheduled_gain name="Yaw Damper Rate">
      <input>velocities/r-aero-rad_sec</input>
      <table>
        <independentVar lookup="row">velocities/ve-kts</independentVar>
        <tableData>
          30     0.00
          60     2.00
        </tableData>
      </table>
      <gain>fcs/yaw-damper-enable</gain>
    </scheduled_gain>

    <summer name="Rudder Sum">
      <input>fcs/rudder-command-sum</input>
      <input>fcs/yaw-damper-rate</input>
      <clipto>
        <min> -1.1 </min>
        <max>  1.1 </max>
      </clipto>
    </summer>
-->
    <aerosurface_scale name="fcs/rudder/rudder-full-deg">
      <input>fcs/rudder/rudder-cmd-sum</input>
      <range>
        <min> -35 </min>
        <max>  35 </max>
      </range>
    </aerosurface_scale>

    <aerosurface_scale name="fcs/rudder/rudder-limited-deg">
      <input>fcs/rudder/rudder-cmd-sum</input>
      <range>
	<min>-4</min>
	<max> 4</max>
      </range>
    </aerosurface_scale>

    <switch name="fcs/rudder/rudder-sum-deg">
      <default value="fcs/rudder/rudder-limited-deg"/>
      <test value="fcs/rudder/rudder-full-deg" logic="OR">
	fcs/flap-pos-norm != 0
	fcs/rudder/spin-assist == 1
      </test>
    </switch>

    <actuator name="fcs/surfaces/rudder-pos-deg">
      <input>fcs/rudder/rudder-sum-deg</input>
      <rate_limit>fcs/rate-limits/rudder</rate_limit>
      <output>fcs/rudder-pos-deg</output>
    </actuator>
    
    <aerosurface_scale name="fcs/surfaces/rudder-pos-norm">
      <input>fcs/rudder-pos-deg</input>
      <domain>
        <min>-35 </min>
        <max> 35 </max>
      </domain>
      <range>
        <min> -1 </min>
        <max>  1 </max>
      </range>
      <output>fcs/rudder-pos-norm</output>
    </aerosurface_scale>

    <aerosurface_scale name="fcs/surfaces/rudder-pos-rad">
      <input>fcs/surfaces/rudder-pos-norm</input>
      <range>
	<min>-0.610865</min>
	<max> 0.610865</max>
      </range>
      <output>fcs/rudder-pos-rad</output>
    </aerosurface_scale>

  </channel>
  
  <channel name="Flap">
    <kinematic name="fcs/flap-pos-deg">
      <input>fcs/flap-cmd-norm</input>
      <traverse>
	<setting>
          <position>  0 </position>
          <time>      0 </time>
	</setting>
	<setting>
          <position> 30 </position>
          <time>      8 </time>
	</setting>
	<setting>
          <position> 40 </position>
          <time>      12 </time>
	</setting>
      </traverse>
      <output>fcs/surfaces/flap-pos-deg</output>
    </kinematic>

    <aerosurface_scale name="fcs/surfaces/flap-pos-norm">
      <input>fcs/flap-pos-deg</input>
      <domain>
	<min>  0 </min>
	<max> 40 </max>
      </domain>
      <range>
	<min> 0 </min>
	<max> 1 </max>
      </range>
      <output>fcs/flap-pos-norm</output>
    </aerosurface_scale>
  </channel>

  <!-- slats -->
  <property value="4.58333">fcs/rate-limits/slats</property>
  
  <channel name="Slat">
    <switch name="fcs/slats/slats-cmd-deg">
      <default value="0"/>
      <test value="27.5">
	fcs/flap-cmd-norm ge 0.75
      </test>
    </switch>

    <actuator name="fcs/slats/slats-pos-deg">
      <input>fcs/slats/slats-cmd-deg</input>
      <rate_limit>fcs/rate-limits/slats</rate_limit>
      <output>fcs/surfaces/slats-pos-deg</output>
    </actuator>
    
    <aerosurface_scale name="fcs/surfaces/slats-pos-norm">
      <input>fcs/slats/slats-pos-deg</input>
      <domain>
	<min>  0 </min>
	<max> 27.5 </max>
      </domain>
      <range>
	<min> 0 </min>
	<max> 1 </max>
      </range>
      <output>fcs/slats-pos-norm</output>
    </aerosurface_scale>
  </channel>

  <channel name="Landing Gear">
    <kinematic name="Gear Control">
      <input>gear/gear-cmd-norm</input>
      <traverse>
	<setting>
          <position> 0 </position>
          <time>     0 </time>
	</setting>
	<setting>
          <position> 1 </position>
          <time>     7 </time>
	</setting>
      </traverse>
      <output>gear/gear-pos-norm</output>
    </kinematic>

  </channel>

  <property value="12">fcs/rate-limits/speedbrake-ext</property>
  <property value="24">fcs/rate-limits/speedbrake-rtr</property>
  <channel name="Speedbrake">
    <pure_gain name="fcs/speedbrake/speedbrake-cmd-deg">
      <input>fcs/speedbrake-cmd-norm</input>      
      <gain>60</gain>
      <clipto>
	<min>0</min>
	<max>60</max>
      </clipto>
    </pure_gain>

    <switch name="fcs/speedbrake/speedbrake-sum-deg">
      <default value="fcs/speedbrake/speedbrake-cmd-deg"/>
      <test value="0">
	fcs/speedbrake/speedbrake-test == 1
      </test>
    </switch>
    
    <actuator name="fcs/surfaces/speedbrake-pos-deg">
      <input>fcs/speedbrake/speedbrake-sum-deg</input>
      <rate_limit sense="incr">fcs/rate-limits/speedbrake-ext</rate_limit>
      <rate_limit sense="decr">fcs/rate-limits/speedbrake-rtr</rate_limit>
      <output>fcs/speedbrake-pos-deg</output>
    </actuator>

    <aerosurface_scale name="fcs/surfaces/speedbrake-pos-norm">
      <input>fcs/surfaces/speedbrake-pos-deg</input>
      <domain>
	<min>0</min>
	<max>60</max>
      </domain>
      <range>
	<min>0</min>
	<max>1</max>
      </range>
      <output>fcs/speedbrake-pos-norm</output>
    </aerosurface_scale>

  </channel>

</flight_control>
