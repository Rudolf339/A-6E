<flight_control name="FCS A-6E">
  <property value="30">fcs/rate-limits/elevator</property>
  <property value="0">fcs/surfaces/flap-pos-norm</property>
  <channel name="Pitch">

    <summer name="fcs/elevator/pitch-trim-sum">
      <input>fcs/elevator-cmd-norm</input>
      <input>fcs/pitch-trim-cmd-norm</input>
      <clipto>
        <min> -1 </min>
	<max>  1 </max>
      </clipto>
    </summer>

    <aerosurface_scale name="fcs/elevator/elevator-limited-deg">
      <input>fcs/elevator/pitch-trim-sum</input>
      <range>
        <min>  -9.5 </min>
	<max>   1.5 </max>
      </range>
      <zero_centered>false</zero_centered>
    </aerosurface_scale>

    <aerosurface_scale name="fcs/elevator/elevator-full-deg">
      <input>fcs/elevator/pitch-trim-sum</input>
      <range>
        <min> -24.0 </min>
	<max>   1.5 </max>
      </range>
      <zero_centered>false</zero_centered>
    </aerosurface_scale>

    <switch name="fcs/elevator/elevator-correct-deg">
      <default value="fcs/elevator/elevator-full-deg"/>
      <test value="fcs/elevator/elevator-limited-deg">
	fcs/surfaces/flap-pos-norm == 0
      </test>
    </switch>

    <actuator name="fcs/surfaces/elevator-pos-deg">
      <input>fcs/elevator/elevator-correct-deg</input>
      <rate_limit>fcs/rate-limits/elevator</rate_limit> <!-- guesstimated value, ~1 s travel -->
      <output>fcs/elevator-pos-norm</output>
    </actuator>
      
    <aerosurface_scale name="fcs/surfaces/elevator-pos-norm">
      <input>fcs/surfaces/elevator-pos-deg</input>
      <domain>
        <min> -24.0 </min>
	<max>   1.5 </max>
      </domain>
      <range>
        <min> -1 </min>
	<max>  1 </max>
      </range>
      <zero_centered>false</zero_centered>
      <output>fcs/elevator-pos-norm</output>
    </aerosurface_scale>

    <aerosurface_scale name="fcs/surfaces/elevator-pos-rad">
      <input>fcs/surfaces/elevator-pos-norm</input>
      <range>
	<min>-0.733038 </min>
	<max> 0.0261799</max>
      </range>
      <zero-centered>false</zero-centered>
    </aerosurface_scale>

  </channel>

  <property value="250">fcs/rate-limits/flaperon</property>
  <channel name="Roll">

    <summer name="fcs/flaperon/roll-trim-sum">
      <input>fcs/aileron-cmd-norm</input>
      <input>fcs/roll-trim-cmd-norm</input>
      <clipto>
        <min> -1 </min>
        <max>  1 </max>
      </clipto>
    </summer>

    <pure_gain name="fcs/flaperon/left-flaperon-cmd-deg">
      <input>fcs/roll-trim-sum</input>
      <gain>51</gain>
      <clipto>
	<min> -51 </min>
	<max>  0  </max>
      </clipto>
    </pure_gain>

    <switch name="fcs/flaperon/left-flaperon-sum-deg">
      <default value="fcs/flaperon/left-flaperon-cmd-deg"/>
      <test value="-39" logic="AND">
	fcs/gnd-spoiler-arm == 1
	gear/unit[1]/WOW == 1
	fcs/throttle-cmd-norm == 0
	fcs/throttle-cmd-norm[1] == 0
      </test>
      <test value="0">
	fcs/flaperon/roll-trim-sum gt 0
      </test>
    </switch>

    <actuator name="fcs/surfaces/left-flaperon-pos-deg">
      <input>fcs/flaperon/left-flaperon-sum-deg</input>
      <rate_limit>fcs/rate-limits/flaperon</rate_limit>
      <output>fcs/left-aileron-pos-deg</output>
    </actuator>

    <aerosurface_scale name="fcs/surfaces/left-flaperon-pos-norm">
      <input>fcs/surfaces/left-flaperon-pos-deg</input>
      <domain>
	<min>-51</min>
	<max>0</max>
      </domain>
      <range>
	<min>-1</min>
	<max>0</max>
      </range>
      <output>fcs/left-aileron-pos-norm</output>
    </aerosurface_scale>

    <aerosurface_scale name="fcs/surfaces/left-flaperon-pos-rad">
      <input>fcs/surfaces/left-flaperon-pos-norm</input>
      <range>
	<min>-0.890118</min>
	<max>0</max>
      </range>
      <output>fcs/left-aileron-pos-rad</output>
    </aerosurface_scale>

    <pure_gain name="fcs/flaperon/right-flaperon-cmd-deg">
      <input>fcs/roll-trim-sum</input>
      <gain>-51</gain>
      <clipto>
	<min> -51 </min>
	<max>  0  </max>
      </clipto>
    </pure_gain>

    <switch name="fcs/flaperon/right-flaperon-sum-deg">
      <default value="fcs/flaperon/right-flaperon-cmd-deg"/>
      <test value="-39" logic="AND">
	fcs/gnd-spoiler-arm == 1
	gear/unit[1]/WOW == 1
	fcs/throttle-cmd-norm == 0
	fcs/throttle-cmd-norm[1] == 0
      </test>
      <test value="0">
	fcs/flaperon/roll-trim-sum lt 0
      </test>
    </switch>

    <actuator name="fcs/surfaces/right-flaperon-pos-deg">
      <input>fcs/flaperon/right-flaperon-sum-deg</input>
      <rate_limit>fcs/rate-limits/flaperon</rate_limit>
      <output>fcs/surfaces/right-flaperon-pos-deg</output>
      <output>fcs/right-aileron-pos-deg</output>
    </actuator>

    <aerosurface_scale name="fcs/surfaces/right-flaperon-pos-norm">
      <input>fcs/surfaces/right-flaperon-pos-deg</input>
      <domain>
	<min>-51</min>
	<max>0</max>
      </domain>
      <range>
	<min>-1</min>
	<max>0</max>
      </range>
      <output>fcs/right-aileron-pos-norm</output>
    </aerosurface_scale>

    <aerosurface_scale name="fcs/surfaces/right-flaperon-pos-rad">
      <input>fcs/surfaces/right-flaperon-pos-norm</input>
      <range>
	<min>-0.890118</min>
	<max>0</max>
      </range>
      <output>fcs/right-aileron-pos-rad</output>
    </aerosurface_scale>

  </channel>

<!--  <property value="1">fcs/yaw-damper-enable</property> -->
  <channel name="Yaw">

    <summer name="Rudder Command Sum">
      <input>fcs/rudder-cmd-norm</input>
      <input>fcs/yaw-trim-cmd-norm</input>
      <clipto>
        <min> -1 </min>
        <max>  1 </max>
      </clipto>
    </summer>
<!--
    <scheduled_gain name="Yaw Damper Rate">
      <input>velocities/r-aero-rad_sec</input>
      <table>
        <independentVar lookup="row">velocities/ve-kts</independentVar>
        <tableData>
          30     0.00
          60     2.00
        </tableData>
      </table>
      <gain>fcs/yaw-damper-enable</gain>
    </scheduled_gain>

    <summer name="Rudder Sum">
      <input>fcs/rudder-command-sum</input>
      <input>fcs/yaw-damper-rate</input>
      <clipto>
        <min> -1.1 </min>
        <max>  1.1 </max>
      </clipto>
    </summer>
-->
    <aerosurface_scale name="Rudder Control">
      <input>fcs/rudder-command-sum</input>
      <domain>
        <min> -1.1 </min>
        <max>  1.1 </max>
      </domain>
      <range>
        <min> -0.35 </min>
        <max>  0.35 </max>
      </range>
      <output>fcs/rudder-pos-rad</output>
    </aerosurface_scale>

    <aerosurface_scale name="rudder normalization">
      <input>fcs/rudder-pos-rad</input>
      <domain>
        <min> -0.35 </min>
        <max>  0.35 </max>
      </domain>
      <range>
        <min> -1 </min>
        <max>  1 </max>
      </range>
      <output>fcs/rudder-pos-norm</output>
    </aerosurface_scale>

  </channel>

  <channel name="Flaps">
    <kinematic name="fcs/surfaces/flap-pos-deg">
      <input>fcs/flap-cmd-norm</input>
      <traverse>
	<setting>
          <position>  0 </position>
          <time>      0 </time>
	</setting>
	<setting>
          <position> 30 </position>
          <time>      4 </time>
	</setting>
	<setting>
          <position> 40 </position>
          <time>      3 </time>
	</setting>
      </traverse>
      <output>fcs/flap-pos-deg</output>
    </kinematic>

    <aerosurface_scale name="fcs/surfaces/flap-pos-norm">
      <input>fcs/flap-pos-deg</input>
      <domain>
        <min>  0 </min>
        <max> 30 </max>
      </domain>
      <range>
        <min> 0 </min>
        <max> 1 </max>
      </range>
      <output>fcs/flap-pos-norm</output>
    </aerosurface_scale>

  </channel>

  <channel name="Landing Gear">
    <kinematic name="Gear Control">
      <input>gear/gear-cmd-norm</input>
      <traverse>
	<setting>
          <position> 0 </position>
          <time>     0 </time>
	</setting>
	<setting>
          <position> 1 </position>
          <time>     5 </time>
	</setting>
      </traverse>
      <output>gear/gear-pos-norm</output>
    </kinematic>

  </channel>

  <channel name="Speedbrake">
    <kinematic name="Speedbrake Control">
      <input>fcs/speedbrake-cmd-norm</input>
      <traverse>
	<setting>
          <position> 0 </position>
          <time>     0 </time>
	</setting>
	<setting>
          <position> 1 </position>
          <time>     1 </time>
	</setting>
      </traverse>
      <output>fcs/speedbrake-pos-norm</output>
    </kinematic>

  </channel>

</flight_control>
